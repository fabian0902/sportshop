{"ast":null,"code":"import React,{useContext,useEffect}from'react';import{GlobalState}from'../../../GlobalState';import{Link}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function OrderHistory(){const state=useContext(GlobalState);const[history,setHistory]=state.UserAPI.history;const[isAdmin]=state.UserAPI.isAdmin;const[token]=state.token;useEffect(()=>{if(token){const getHistory=async()=>{if(isAdmin){const res=await axios.get(\"/api/payment\",{headers:{Authorization:token}});setHistory(res.data);}else{const res=await axios.get(\"/user/history\",{headers:{Authorization:token}});setHistory(res.data);}};getHistory();}},[token,isAdmin,setHistory]);return/*#__PURE__*/_jsxs(\"div\",{className:\"history-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Historial\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Tienes \",history.length,\" ordenes\"]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID de Pago\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha de Compra\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:history.map(items=>items._id?/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:items.paymentID}),/*#__PURE__*/_jsx(\"td\",{children:new Date(items.createdAt).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:`/history/${items._id}`,children:\" Detalles \"})})]},items._id):null)})]})]});}export default OrderHistory;","map":{"version":3,"names":["React","useContext","useEffect","GlobalState","Link","axios","jsx","_jsx","jsxs","_jsxs","OrderHistory","state","history","setHistory","UserAPI","isAdmin","token","getHistory","res","get","headers","Authorization","data","className","children","length","map","items","_id","paymentID","Date","createdAt","toLocaleDateString","to"],"sources":["C:/Users/Fabian FF/Desktop/envio/sportShop/client/src/components/mainpages/history/OrderHistory.js"],"sourcesContent":["import React,{useContext, useEffect} from 'react';\nimport {GlobalState} from '../../../GlobalState';\nimport {Link} from 'react-router-dom';\nimport axios from 'axios';\n\n\n\nfunction OrderHistory() {\n    const state = useContext(GlobalState)\n    const [history, setHistory] = state.UserAPI.history\n    const [isAdmin] = state.UserAPI.isAdmin\n    const [token] = state.token\n\n\n    useEffect(()=>{\n        if(token){\n            const getHistory = async() =>{\n                if(isAdmin){\n                    const res = await axios.get(\"/api/payment\",{\n                        headers: {Authorization: token}\n                    })\n                    setHistory(res.data);\n\n                }else{\n                    const res = await axios.get(\"/user/history\",{\n                        headers: {Authorization: token}\n                    })\n                    setHistory(res.data);\n\n                }\n                \n            }\n            getHistory()\n        }\n\n    },[token, isAdmin,setHistory])\n\n\n    return (\n        <div className=\"history-page\">\n            <h2>Historial</h2>\n            <h4>Tienes {history.length} ordenes</h4>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>ID de Pago</th>\n                            <th>Fecha de Compra</th>\n                            <th></th>\n                        </tr>\n\n                    </thead>\n                    <tbody>\n                    {\n    history.map(items => items._id ? (\n        <tr key={items._id}>\n            <td>{items.paymentID}</td>\n            <td>{new Date(items.createdAt).toLocaleDateString()}</td>\n            <td><Link to={`/history/${items._id}`}> Detalles </Link></td>\n        </tr>\n    ) : null)\n}\n\n                    </tbody>\n                    \n                </table>\n        </div>\n        \n    );\n}\n\nexport default OrderHistory;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAEC,UAAU,CAAEC,SAAS,KAAO,OAAO,CACjD,OAAQC,WAAW,KAAO,sBAAsB,CAChD,OAAQC,IAAI,KAAO,kBAAkB,CACrC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAI1B,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACpB,KAAM,CAAAC,KAAK,CAAGV,UAAU,CAACE,WAAW,CAAC,CACrC,KAAM,CAACS,OAAO,CAAEC,UAAU,CAAC,CAAGF,KAAK,CAACG,OAAO,CAACF,OAAO,CACnD,KAAM,CAACG,OAAO,CAAC,CAAGJ,KAAK,CAACG,OAAO,CAACC,OAAO,CACvC,KAAM,CAACC,KAAK,CAAC,CAAGL,KAAK,CAACK,KAAK,CAG3Bd,SAAS,CAAC,IAAI,CACV,GAAGc,KAAK,CAAC,CACL,KAAM,CAAAC,UAAU,CAAG,KAAAA,CAAA,GAAU,CACzB,GAAGF,OAAO,CAAC,CACP,KAAM,CAAAG,GAAG,CAAG,KAAM,CAAAb,KAAK,CAACc,GAAG,CAAC,cAAc,CAAC,CACvCC,OAAO,CAAE,CAACC,aAAa,CAAEL,KAAK,CAClC,CAAC,CAAC,CACFH,UAAU,CAACK,GAAG,CAACI,IAAI,CAAC,CAExB,CAAC,IAAI,CACD,KAAM,CAAAJ,GAAG,CAAG,KAAM,CAAAb,KAAK,CAACc,GAAG,CAAC,eAAe,CAAC,CACxCC,OAAO,CAAE,CAACC,aAAa,CAAEL,KAAK,CAClC,CAAC,CAAC,CACFH,UAAU,CAACK,GAAG,CAACI,IAAI,CAAC,CAExB,CAEJ,CAAC,CACDL,UAAU,CAAC,CAAC,CAChB,CAEJ,CAAC,CAAC,CAACD,KAAK,CAAED,OAAO,CAACF,UAAU,CAAC,CAAC,CAG9B,mBACIJ,KAAA,QAAKc,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzBjB,IAAA,OAAAiB,QAAA,CAAI,WAAS,CAAI,CAAC,cAClBf,KAAA,OAAAe,QAAA,EAAI,SAAO,CAACZ,OAAO,CAACa,MAAM,CAAC,UAAQ,EAAI,CAAC,cACpChB,KAAA,UAAAe,QAAA,eACIjB,IAAA,UAAAiB,QAAA,cACIf,KAAA,OAAAe,QAAA,eACIjB,IAAA,OAAAiB,QAAA,CAAI,YAAU,CAAI,CAAC,cACnBjB,IAAA,OAAAiB,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBjB,IAAA,QAAQ,CAAC,EACT,CAAC,CAEF,CAAC,cACRA,IAAA,UAAAiB,QAAA,CAEhBZ,OAAO,CAACc,GAAG,CAACC,KAAK,EAAIA,KAAK,CAACC,GAAG,cAC1BnB,KAAA,OAAAe,QAAA,eACIjB,IAAA,OAAAiB,QAAA,CAAKG,KAAK,CAACE,SAAS,CAAK,CAAC,cAC1BtB,IAAA,OAAAiB,QAAA,CAAK,GAAI,CAAAM,IAAI,CAACH,KAAK,CAACI,SAAS,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAK,CAAC,cACzDzB,IAAA,OAAAiB,QAAA,cAAIjB,IAAA,CAACH,IAAI,EAAC6B,EAAE,CAAE,YAAYN,KAAK,CAACC,GAAG,EAAG,CAAAJ,QAAA,CAAC,YAAU,CAAM,CAAC,CAAI,CAAC,GAHxDG,KAAK,CAACC,GAIX,CAAC,CACL,IAAI,CAAC,CAGc,CAAC,EAEL,CAAC,EACX,CAAC,CAGd,CAEA,cAAe,CAAAlB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module"}