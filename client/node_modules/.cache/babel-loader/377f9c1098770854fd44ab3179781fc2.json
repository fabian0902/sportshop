{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fabian FF\\\\Downloads\\\\ecommerce-master\\\\ecommerce-master\\\\client\\\\src\\\\components\\\\mainpages\\\\cart\\\\Cart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport { GlobalState } from '../../../GlobalState';\nimport axios from 'axios';\nimport PaypalButton from './PaypalButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.withCredentials = true;\n\nfunction Cart() {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [cart, setCart] = state.UserAPI.cart;\n  const [token] = state.token;\n  const [total, setTotal] = useState(0);\n  useEffect(() => {\n    const getTotal = () => {\n      const total = cart.reduce((prev, item) => {\n        return prev + item.price * item.quantity;\n      }, 0);\n      setTotal(total);\n    };\n\n    getTotal();\n  }, [cart]);\n\n  const addToCart = async cart => {\n    await axios.patch(\"/user/addcart\", {\n      cart\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n  };\n\n  const increment = id => {\n    cart.forEach(item => {\n      if (item._id === id) {\n        item.quantity += 1;\n      }\n    });\n    setCart([...cart]);\n    addToCart(cart);\n  };\n\n  const decrement = id => {\n    cart.forEach(item => {\n      if (item._id === id) {\n        item.quantity === 1 ? item.quantity = 1 : item.quantity -= 1;\n      }\n    });\n    setCart([...cart]);\n    addToCart(cart);\n  };\n\n  const removeProduct = id => {\n    if (window.confirm(\"do you want to delete this product?\")) {\n      cart.forEach((item, index) => {\n        if (item._id === id) {\n          cart.splice(index, 1);\n        }\n      });\n      setCart([...cart]);\n      addToCart(cart);\n    }\n  };\n\n  const tranSuccess = async payment => {\n    const {\n      paymentID,\n      address\n    } = payment;\n    await axios.post(\"/api/payment\", {\n      cart,\n      paymentID,\n      address\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n    setCart([]);\n    addToCart([]);\n    alert(\"You have successfully placed an order.\");\n  };\n\n  if (cart.length === 0) return /*#__PURE__*/_jsxDEV(\"h2\", {\n    style: {\n      textAlign: \"center\",\n      fontSize: \"5rem\"\n    },\n    children: \"Su Carrito est\\xE1 Vac\\xED Empty\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 11\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [cart.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detail cart\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: product.images.url,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"box-detail\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [product.title, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"$\", product.price * product.quantity, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [product.description, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [product.content, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"amount\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => decrement(product._id),\n            children: \" - \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\" \", product.quantity, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => increment(product._id),\n            children: \" + \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"delete\",\n          onClick: () => removeProduct(product._id),\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, product._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"total\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total: $ \", total, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(PaypalButton, {\n        total: total,\n        tranSuccess: tranSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Cart, \"G3JeC15lvNmKw15RIDDgjAjZnYY=\");\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["C:/Users/Fabian FF/Downloads/ecommerce-master/ecommerce-master/client/src/components/mainpages/cart/Cart.js"],"names":["React","useContext","useState","useEffect","GlobalState","axios","PaypalButton","defaults","withCredentials","Cart","state","cart","setCart","UserAPI","token","total","setTotal","getTotal","reduce","prev","item","price","quantity","addToCart","patch","headers","Authorization","increment","id","forEach","_id","decrement","removeProduct","window","confirm","index","splice","tranSuccess","payment","paymentID","address","post","alert","length","textAlign","fontSize","map","product","images","url","title","description","content"],"mappings":"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","sourcesContent":["import React,{useContext, useState, useEffect} from 'react';\nimport {GlobalState} from '../../../GlobalState';\nimport axios from 'axios';\nimport PaypalButton from './PaypalButton';\n\n\naxios.defaults.withCredentials=true\n\nfunction Cart() {\n\n  const state = useContext(GlobalState)\n  const[cart, setCart] = state.UserAPI.cart\n  const [token] = state.token\n  const [total, setTotal]= useState(0)\n\n\n  \n\n  useEffect(()=>{\n    const getTotal = () =>{\n      const total = cart.reduce((prev, item)=>{\n            return prev + (item.price * item.quantity)\n      },0)\n      setTotal(total)\n    }\n    getTotal()\n  },[cart])\n\n  const addToCart = async (cart)=>{\n    await axios.patch(\"/user/addcart\",{cart},{\n      headers: {Authorization: token}\n    })\n  }\n\n  const increment = (id) =>{\n    cart.forEach(item=>{\n      if(item._id === id){\n        item.quantity += 1\n      }\n    })\n    setCart([...cart])\n    addToCart(cart)\n  }\n  const decrement = (id) =>{\n    cart.forEach(item=>{\n      if(item._id === id){\n        item.quantity === 1 ? item.quantity = 1 : item.quantity -= 1\n      }\n    })\n    setCart([...cart])\n    addToCart(cart)\n  }\n  const removeProduct = id =>{\n    if(window.confirm (\"do you want to delete this product?\")){\n        cart.forEach((item,index)=>{\n          if(item._id ===  id){\n            cart.splice( index, 1)\n          }\n        })\n        setCart([...cart])\n        addToCart(cart)\n    }\n  }\n\n  const tranSuccess = async (payment)=>{\n    \n    const {paymentID, address} = payment\n\n      await axios.post(\"/api/payment\", {cart, paymentID, address},{\n         headers: {Authorization: token}\n      })\n      setCart([])\n      addToCart([])\n      alert(\"You have successfully placed an order.\")\n  }\n\n\n  if(cart.length === 0)\n  return  <h2 style={{textAlign: \"center\", fontSize:\"5rem\"}} >Su Carrito está Vací Empty</h2>\n\n\n\n  return (\n    <div>\n        {\n          cart.map(product =>(\n           \n\n            <div className='detail cart' key={product._id} >\n              <img src={product.images.url} alt=\"\" />{/* aca cambie detailProduct por product */}\n                <div className='box-detail'>\n                    <h2>{product.title} </h2>\n                        \n                    <h3>${product.price * product.quantity} </h3>\n                    <p>{product.description} </p>\n                    <p>{product.content} </p>\n                    <div className=\"amount\">\n                      <button onClick={()=> decrement(product._id)}> - </button>\n                      \n                      <span> {product.quantity} </span>\n                      <button onClick={()=> increment(product._id)}> + </button>\n                    </div>\n                    <div className=\"delete\" onClick={()=>removeProduct(product._id)}>X</div>\n                </div>\n            </div>\n\n          ))\n        }\n        <div className=\"total\">\n          <h3>Total: $ {total} </h3>\n          <PaypalButton total={total} tranSuccess={tranSuccess} />\n        </div>\n\n\n    </div>\n  );\n}\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}