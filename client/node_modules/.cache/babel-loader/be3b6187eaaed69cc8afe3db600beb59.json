{"ast":null,"code":"import React,{useState,useContext}from'react';import{GlobalState}from'../../../GlobalState';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.withCredentials=true;function Categories(){const state=useContext(GlobalState);const[categories]=state.CategoriesAPI.categories;const[category,setCategory]=useState(\"\");const[token]=state.token;const[callback,setCallback]=state.CategoriesAPI.callback;const[onEdit,setOnEdit]=useState(false);const[id,setID]=useState(\"\");const createCategory=async e=>{e.preventDefault();try{if(onEdit){const res=await axios.put(`/api/category/${id}`,{name:category},{headers:{Authorization:token}});alert(res.data.msg);}else{const res=await axios.post(\"/api/category\",{name:category},{headers:{Authorization:token}});alert(res.data);}setOnEdit(false);setCategory(\"\");setCallback(!callback);}catch(err){if(err.response){console.error(`Error en la respuesta del servidor: ${err.response.status} - ${err.response.data}`);}else if(err.request){console.error('No hubo respuesta del servidor:',err.request);}else{console.error('Error:',err.message);}}};const editCategory=async(id,name)=>{setID(id);setCategory(name);setOnEdit(true);};const handleDelete=categoryId=>{const confirmed=window.confirm(\"¿Estás seguro de que deseas eliminar esta categoría?\");if(confirmed){deleteCategory(categoryId);}};const deleteCategory=async id=>{try{const res=await axios.delete(`/api/category/${id}`,{headers:{Authorization:token}});setCallback(!callback);alert(res.data.msg);}catch(err){alert(err.response.data.msg);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"categories\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:createCategory,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Administrar Categorias\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"category\",placeholder:\"Ingrese una categoria\",value:category,required:true,onChange:e=>setCategory(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{class:\"btn primary\",type:\"submit\",children:onEdit?\"Actualizar\":\"Crear\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:categories.map(category=>/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[category.name,\" \"]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn success\",onClick:()=>editCategory(category._id,category.name),children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn danger\",onClick:()=>handleDelete(category._id),children:\"Eliminar\"})]},category._id))})]});}export default Categories;","map":{"version":3,"names":["React","useState","useContext","GlobalState","axios","jsx","_jsx","jsxs","_jsxs","defaults","withCredentials","Categories","state","categories","CategoriesAPI","category","setCategory","token","callback","setCallback","onEdit","setOnEdit","id","setID","createCategory","e","preventDefault","res","put","name","headers","Authorization","alert","data","msg","post","err","response","console","error","status","request","message","editCategory","handleDelete","categoryId","confirmed","window","confirm","deleteCategory","delete","className","children","onSubmit","htmlFor","type","placeholder","value","required","onChange","target","class","map","onClick","_id"],"sources":["C:/Users/Fabian FF/Desktop/envio/sportShop/client/src/components/mainpages/categories/Categories.js"],"sourcesContent":["import React,{useState, useContext} from 'react';\nimport {GlobalState} from '../../../GlobalState';\nimport axios from 'axios';\n\n\naxios.defaults.withCredentials = true\n\n\nfunction Categories() {\n\n\n    const state= useContext(GlobalState)\n    const [categories] = state.CategoriesAPI.categories\n    const [category, setCategory] = useState(\"\")\n    const [token] = state.token\n    const [callback, setCallback] = state.CategoriesAPI.callback\n    const [onEdit, setOnEdit] = useState(false)\n    const [id, setID] = useState(\"\")\n\n    const createCategory = async e =>{\n        e.preventDefault()\n        try {\n            if(onEdit){\n                const res = await axios.put(`/api/category/${id}`,{name: category},{\n                    headers: {Authorization: token}\n                })\n                alert(res.data.msg);\n            }else{\n                const res = await axios.post(\"/api/category\",{name: category},{\n                    headers: {Authorization: token}\n                })\n                alert(res.data);\n            }\n                setOnEdit(false)\n                setCategory(\"\")\n                setCallback(!callback)\n            } catch (err) {\n                if (err.response) {\n                  console.error(`Error en la respuesta del servidor: ${err.response.status} - ${err.response.data}`);\n                } else if (err.request) {\n                  console.error('No hubo respuesta del servidor:', err.request);\n                } else {\n                  console.error('Error:', err.message);\n                }\n              }\n    }\n\n    const editCategory = async (id, name) =>{\n        setID(id)\n        setCategory(name)\n        setOnEdit(true)\n    }\n\n    const handleDelete = (categoryId) => {\n        const confirmed = window.confirm(\"¿Estás seguro de que deseas eliminar esta categoría?\");\n        if (confirmed) {\n            deleteCategory(categoryId);\n        }\n    };\n\n\n    \n\n    const deleteCategory = async id =>{\n        try {\n            const res = await axios.delete(`/api/category/${id}`,{\n                headers: {Authorization: token}\n            })\n            setCallback(!callback)\n            alert(res.data.msg)\n\n        } catch (err) {\n            alert(err.response.data.msg)\n        }\n\n    }\n\n\n  return (\n\n    <div className='categories'>\n        <form onSubmit={createCategory}>\n            <label htmlFor=\"category\">Administrar Categorias</label>\n          \n            <input \n            type=\"text\" \n            name=\"category\" \n            placeholder=\"Ingrese una categoria\"\n            value={category} \n            required \n            onChange={e => setCategory(e.target.value)}\n            />\n              <br /><br />\n            <button  class=\"btn primary\" type='submit'>{onEdit ? \"Actualizar\": \"Crear\"}</button>\n        </form>\n        <div className=\"col\">\n            {\n                categories.map(category => (\n                    <div className=\"row\" key={category._id}>\n                        <p>{category.name} </p>\n                        <button class=\"btn success\" onClick={()=> editCategory(category._id, category.name)}>Editar</button>\n                        <button class=\"btn danger\" onClick={() => handleDelete(category._id)}>Eliminar</button>\n                    </div>\n                ))\n            }\n        </div>\n    </div>\n  )\n}\n\nexport default Categories;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}