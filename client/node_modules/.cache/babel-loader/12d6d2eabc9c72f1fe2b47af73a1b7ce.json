{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\Fabian FF\\\\Desktop\\\\envio\\\\sportShop\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\Fabian FF\\\\Desktop\\\\envio\\\\sportShop\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Fabian FF\\\\Desktop\\\\envio\\\\sportShop\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useContext}from'react';import{GlobalState}from'../../../GlobalState';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.withCredentials=true;function Categories(){var state=useContext(GlobalState);var _state$CategoriesAPI$=_slicedToArray(state.CategoriesAPI.categories,1),categories=_state$CategoriesAPI$[0];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var _state$token=_slicedToArray(state.token,1),token=_state$token[0];var _state$CategoriesAPI$2=_slicedToArray(state.CategoriesAPI.callback,2),callback=_state$CategoriesAPI$2[0],setCallback=_state$CategoriesAPI$2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),onEdit=_useState4[0],setOnEdit=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),id=_useState6[0],setID=_useState6[1];var createCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res,_res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;if(!onEdit){_context.next=9;break;}_context.next=5;return axios.put(\"/api/category/\".concat(id),{name:category},{headers:{Authorization:token}});case 5:res=_context.sent;alert(res.data.msg);_context.next=13;break;case 9:_context.next=11;return axios.post(\"/api/category\",{name:category},{headers:{Authorization:token}});case 11:_res=_context.sent;alert(_res.data);case 13:setOnEdit(false);setCategory(\"\");setCallback(!callback);_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](1);if(_context.t0.response){console.error(\"Error en la respuesta del servidor: \".concat(_context.t0.response.status,\" - \").concat(_context.t0.response.data));}else if(_context.t0.request){console.error('No hubo respuesta del servidor:',_context.t0.request);}else{console.error('Error:',_context.t0.message);}case 21:case\"end\":return _context.stop();}}},_callee,null,[[1,18]]);}));return function createCategory(_x){return _ref.apply(this,arguments);};}();var editCategory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,name){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setID(id);setCategory(name);setOnEdit(true);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function editCategory(_x2,_x3){return _ref2.apply(this,arguments);};}();var handleDelete=function handleDelete(categoryId){var confirmed=window.confirm(\"¿Estás seguro de que deseas eliminar esta categoría?\");if(confirmed){deleteCategory(categoryId);}};var deleteCategory=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/api/category/\".concat(id),{headers:{Authorization:token}});case 3:res=_context3.sent;setCallback(!callback);alert(res.data.msg);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);alert(_context3.t0.response.data.msg);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function deleteCategory(_x4){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"categories\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:createCategory,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Administrar Categorias\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"category\",placeholder:\"Ingrese una categoria\",value:category,required:true,onChange:function onChange(e){return setCategory(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{class:\"btn primary\",type:\"submit\",children:onEdit?\"Actualizar\":\"Crear\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:categories.map(function(category){return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[category.name,\" \"]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn success\",onClick:function onClick(){return editCategory(category._id,category.name);},children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn danger\",onClick:function onClick(){return handleDelete(category._id);},children:\"Eliminar\"})]},category._id);})})]});}export default Categories;","map":{"version":3,"sources":["C:/Users/Fabian FF/Desktop/envio/sportShop/client/src/components/mainpages/categories/Categories.js"],"names":["React","useState","useContext","GlobalState","axios","defaults","withCredentials","Categories","state","CategoriesAPI","categories","category","setCategory","token","callback","setCallback","onEdit","setOnEdit","id","setID","createCategory","e","preventDefault","put","name","headers","Authorization","res","alert","data","msg","post","response","console","error","status","request","message","editCategory","handleDelete","categoryId","confirmed","window","confirm","deleteCategory","delete","target","value","map","_id"],"mappings":"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","sourcesContent":["import React,{useState, useContext} from 'react';\nimport {GlobalState} from '../../../GlobalState';\nimport axios from 'axios';\n\n\naxios.defaults.withCredentials = true\n\n\nfunction Categories() {\n\n\n    const state= useContext(GlobalState)\n    const [categories] = state.CategoriesAPI.categories\n    const [category, setCategory] = useState(\"\")\n    const [token] = state.token\n    const [callback, setCallback] = state.CategoriesAPI.callback\n    const [onEdit, setOnEdit] = useState(false)\n    const [id, setID] = useState(\"\")\n\n    const createCategory = async e =>{\n        e.preventDefault()\n        try {\n            if(onEdit){\n                const res = await axios.put(`/api/category/${id}`,{name: category},{\n                    headers: {Authorization: token}\n                })\n                alert(res.data.msg);\n            }else{\n                const res = await axios.post(\"/api/category\",{name: category},{\n                    headers: {Authorization: token}\n                })\n                alert(res.data);\n            }\n                setOnEdit(false)\n                setCategory(\"\")\n                setCallback(!callback)\n            } catch (err) {\n                if (err.response) {\n                  console.error(`Error en la respuesta del servidor: ${err.response.status} - ${err.response.data}`);\n                } else if (err.request) {\n                  console.error('No hubo respuesta del servidor:', err.request);\n                } else {\n                  console.error('Error:', err.message);\n                }\n              }\n    }\n\n    const editCategory = async (id, name) =>{\n        setID(id)\n        setCategory(name)\n        setOnEdit(true)\n    }\n\n    const handleDelete = (categoryId) => {\n        const confirmed = window.confirm(\"¿Estás seguro de que deseas eliminar esta categoría?\");\n        if (confirmed) {\n            deleteCategory(categoryId);\n        }\n    };\n\n\n    \n\n    const deleteCategory = async id =>{\n        try {\n            const res = await axios.delete(`/api/category/${id}`,{\n                headers: {Authorization: token}\n            })\n            setCallback(!callback)\n            alert(res.data.msg)\n\n        } catch (err) {\n            alert(err.response.data.msg)\n        }\n\n    }\n\n\n  return (\n\n    <div className='categories'>\n        <form onSubmit={createCategory}>\n            <label htmlFor=\"category\">Administrar Categorias</label>\n          \n            <input \n            type=\"text\" \n            name=\"category\" \n            placeholder=\"Ingrese una categoria\"\n            value={category} \n            required \n            onChange={e => setCategory(e.target.value)}\n            />\n              <br /><br />\n            <button  class=\"btn primary\" type='submit'>{onEdit ? \"Actualizar\": \"Crear\"}</button>\n        </form>\n        <div className=\"col\">\n            {\n                categories.map(category => (\n                    <div className=\"row\" key={category._id}>\n                        <p>{category.name} </p>\n                        <button class=\"btn success\" onClick={()=> editCategory(category._id, category.name)}>Editar</button>\n                        <button class=\"btn danger\" onClick={() => handleDelete(category._id)}>Eliminar</button>\n                    </div>\n                ))\n            }\n        </div>\n    </div>\n  )\n}\n\nexport default Categories;\n"]},"metadata":{},"sourceType":"module"}